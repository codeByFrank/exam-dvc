schema: '2.0'
stages:
  download:
    cmd: python src/data/download_data.py --url 
      "https://datascientest-mlops.s3.eu-west-1.amazonaws.com/mlops_dvc_fr/raw.csv"
      --out data/raw/raw.csv
    deps:
    - path: src/data/download_data.py
      hash: md5
      md5: 93837e6cffc7cda4901cfe6d04827cd7
      size: 1282
    outs:
    - path: data/raw/raw.csv
      hash: md5
      md5: 617b56af2992376d5c3e91ad80823898
      size: 333757
  data_split:
    cmd: python src/data/data_split.py data/raw/raw.csv data/processed
    deps:
    - path: data/raw/raw.csv
      hash: md5
      md5: 617b56af2992376d5c3e91ad80823898
      size: 333757
    - path: src/data/data_split.py
      hash: md5
      md5: 50ce2a960e0518d528ef9a12830da838
      size: 2230
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3650992347abd32b2cd42bde8906b31f
      size: 52989
    - path: data/processed/X_train.csv
      hash: md5
      md5: 10b9624259cdef969e3830e4f6c0c4c3
      size: 210922
    - path: data/processed/y_test.csv
      hash: md5
      md5: 3738f93f228b4914c0c48ba6a9c35298
      size: 6821
    - path: data/processed/y_train.csv
      hash: md5
      md5: a9f6c4c8eba38f4177a8cfac86d19e97
      size: 27405
  normalize:
    cmd: python src/data/normalize.py data/processed data/processed
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3650992347abd32b2cd42bde8906b31f
      size: 52989
    - path: data/processed/X_train.csv
      hash: md5
      md5: 10b9624259cdef969e3830e4f6c0c4c3
      size: 210922
    - path: src/data/normalize.py
      hash: md5
      md5: c5b9b1abe478813477200838afa62daa
      size: 1671
    outs:
    - path: data/processed/X_test_scaled.csv
      hash: md5
      md5: eb33f401380d429e1f212e5f38cdcc5f
      size: 57391
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: be404ef96c19bd97f98a6889f27095d1
      size: 228951
    - path: data/processed/scaler.pkl
      hash: md5
      md5: f45a9cbfe65222e504ee8508d01f142e
      size: 1175
  grid_search:
    cmd: python src/models/grid_search.py data/processed 
      models/data/best_params.json
    deps:
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: be404ef96c19bd97f98a6889f27095d1
      size: 228951
    - path: data/processed/y_train.csv
      hash: md5
      md5: a9f6c4c8eba38f4177a8cfac86d19e97
      size: 27405
    - path: src/models/grid_search.py
      hash: md5
      md5: 15b6616f73d0c286393a20d6d2177033
      size: 1883
    outs:
    - path: models/data/best_params.json
      hash: md5
      md5: 99e6f4989cb25db32df0e0bd39874cfd
      size: 108
  train:
    cmd: python src/models/train.py data/processed models/data/best_params.json 
      models/model.pkl
    deps:
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: be404ef96c19bd97f98a6889f27095d1
      size: 228951
    - path: data/processed/y_train.csv
      hash: md5
      md5: a9f6c4c8eba38f4177a8cfac86d19e97
      size: 27405
    - path: models/data/best_params.json
      hash: md5
      md5: 99e6f4989cb25db32df0e0bd39874cfd
      size: 108
    - path: src/models/train.py
      hash: md5
      md5: 95c6c4af1ce0d5ac600b3347f613347a
      size: 1404
    outs:
    - path: models/model.pkl
      hash: md5
      md5: dcc6840bc532d59eb217b5bc642de6eb
      size: 3638865
  evaluate:
    cmd: python src/models/evaluate.py data/processed models/model.pkl 
      metrics/scores.json data/predictions.csv
    deps:
    - path: data/processed/X_test_scaled.csv
      hash: md5
      md5: eb33f401380d429e1f212e5f38cdcc5f
      size: 57391
    - path: data/processed/y_test.csv
      hash: md5
      md5: 3738f93f228b4914c0c48ba6a9c35298
      size: 6821
    - path: models/model.pkl
      hash: md5
      md5: dcc6840bc532d59eb217b5bc642de6eb
      size: 3638865
    - path: src/models/evaluate.py
      hash: md5
      md5: 725bf37a1a44750561a5d8b2853dfcb7
      size: 1980
    outs:
    - path: data/predictions.csv
      hash: md5
      md5: 6a22c7975d78631f3d9e8b0c6e1639bc
      size: 13597
    - path: metrics/scores.json
      hash: md5
      md5: 35c2b9ef4934616261244b601662d7ad
      size: 132
